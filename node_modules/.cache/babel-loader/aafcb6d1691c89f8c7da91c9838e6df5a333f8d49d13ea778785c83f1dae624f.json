{"ast":null,"code":"import TopicItems from '@/components/TopicItems.vue';\nimport { getTopics } from \"../http/api\";\nexport default {\n  components: {\n    TopicItems\n  },\n  props: [\"tab\"],\n  data() {\n    return {\n      topics: [],\n      total: 0,\n      currentPage: 1\n    };\n  },\n  watch: {\n    tab: {\n      async handler(tab) {\n        const res = await getTopics({\n          params: {\n            tab: tab,\n            page: 1,\n            limit: 20\n          }\n        });\n        this.topics = res.data;\n        const total_num = [423, 720, 280, 200, 120, 640];\n        let index = 0;\n        if (tab === \"good\") {\n          index = 1;\n        } else if (tab === \"share\") {\n          index = 2;\n        } else if (tab === \"ask\") {\n          index = 3;\n        } else if (tab === \"job\") {\n          index = 4;\n        } else if (tab === \"dev\") {\n          index = 5;\n        }\n        this.total = total_num[index];\n        this.currentPage = 1;\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    async currentChange(page) {\n      const res = await getTopics({\n        params: {\n          tab: this.tab,\n          page,\n          limit: 20\n        }\n      });\n      this.topics = res.data;\n    }\n  }\n};","map":{"version":3,"mappings":"AAkBA;AACA;AAEA;EACAA;IAAAC;EAAA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;QACA;UAAAC;YAAAD;YAAAE;YAAAC;UAAA;QAAA;QACA;QACA;QACA;QACA;UACAC;QAEA;UACAA;QACA;UACAA;QACA;UACAA;QACA;UACAA;QAEA;QACA;QACA;MACA;MACAC;IACA;EACA;EACAC;IACA;MACA;QAAAL;UAAAD;UAAAE;UAAAC;QAAA;MAAA;MACA;IACA;EACA;AACA","names":["components","TopicItems","props","data","topics","total","currentPage","watch","tab","params","page","limit","index","immediate","methods"],"sourceRoot":"src/views","sources":["TopicsView.vue"],"sourcesContent":["<template>\r\n    <div v-if=\"topics.length\" class=\"big\">\r\n      <div class=\"list\">\r\n        <TopicItems v-for=\"item in topics\" :key=\"item.id\" :topic=\"item\" />\r\n       \r\n      </div>\r\n      <!-- 分页器 -->\r\n      <el-pagination\r\n        background\r\n        layout=\"prev,pager,next\"\r\n        :total=\"total\"\r\n        :page-size=\"40\"\r\n        @current-change=\"currentChange\"\r\n        :current-page.sync=\"currentPage\"\r\n      ></el-pagination>\r\n    </div>\r\n</template>\r\n<script>\r\nimport TopicItems from '@/components/TopicItems.vue';\r\nimport {getTopics}from \"../http/api\"\r\n\r\nexport default {\r\n  components: {TopicItems  },\r\n  props: [\"tab\"],\r\n  data() {\r\n    return {\r\n      topics: [],\r\n      total:0,\r\n      currentPage:1\r\n    };\r\n  },\r\n  watch: {\r\n    tab: {\r\n      async handler(tab) {\r\n        const res = await getTopics({ params: { tab: tab,page:1,limit:20 } });\r\n        this.topics = res.data;\r\n        const total_num=[423,720,280,200,120,640];\r\n        let index=0;\r\n        if(tab===\"good\"){\r\n            index=1\r\n            \r\n        }else if(tab===\"share\"){\r\n            index=2\r\n        }else if(tab===\"ask\"){\r\n            index=3\r\n        }else if(tab===\"job\"){\r\n            index=4 \r\n        }else if(tab===\"dev\"){\r\n            index=5\r\n\r\n        }\r\n        this.total=total_num[index];\r\n        this.currentPage=1\r\n      },\r\n      immediate: true,\r\n    },\r\n  },\r\n  methods:{\r\n      async currentChange(page){\r\n          const res=await getTopics({params:{tab:this.tab,page,limit:20}})\r\n          this.topics=res.data\r\n      }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.big{\r\n    .list{\r\n        padding: 10px;\r\n     div{\r\n        margin: 10px auto;\r\n        a{\r\n            font-size: 14px;\r\n            text-align: left;\r\n        }\r\n     }\r\n    }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}